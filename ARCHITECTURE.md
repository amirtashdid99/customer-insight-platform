# ğŸ—ï¸ System Architecture

## High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                          â”‚
â”‚                    (React + TypeScript)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   Search     â”‚  â”‚  Dashboard   â”‚  â”‚   Metrics    â”‚           â”‚
â”‚  â”‚   Input      â”‚  â”‚   View       â”‚  â”‚   Charts     â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ HTTP/REST API
                          â”‚ (Axios)
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API LAYER (FastAPI)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  POST /api/analysis/analyze                            â”‚     â”‚
â”‚  â”‚  GET  /api/analysis/status/{id}                        â”‚     â”‚
â”‚  â”‚  GET  /api/analysis/dashboard/{product_name}           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â”‚                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚         â–¼                â–¼                â–¼                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ Analysis â”‚    â”‚  Scraper â”‚    â”‚    ML    â”‚                   â”‚
â”‚  â”‚ Pipeline â”‚â—„â”€â”€â”€â”¤  Service â”‚â”€â”€â”€â–ºâ”‚  Models  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ SQLAlchemy ORM
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DATABASE (PostgreSQL)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  products   â”‚  â”‚  analyses   â”‚  â”‚  comments   â”‚              â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚
â”‚  â”‚  id         â”‚  â”‚  id         â”‚  â”‚  id         â”‚              â”‚
â”‚  â”‚  name       â”‚  â”‚  product_id â”‚  â”‚  text       â”‚              â”‚
â”‚  â”‚  created_at â”‚  â”‚  status     â”‚  â”‚  sentiment  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                        â”‚                        â”‚
â”‚                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚                                  â”‚   topics    â”‚                â”‚
â”‚                                  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                 â”‚
â”‚                                  â”‚  id         â”‚                â”‚
â”‚                                  â”‚  name       â”‚                â”‚
â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow: Complete Analysis Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User    â”‚
â”‚ enters   â”‚  1. User enters product name
â”‚ product  â”‚     "iPhone 15"
â”‚  name    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST /api/analysis/analyze              â”‚  2. API creates analysis job
â”‚                                         â”‚     Status: PENDING
â”‚ â€¢ Create/Find Product in DB             â”‚     Returns: analysis_id
â”‚ â€¢ Create Analysis record                â”‚
â”‚ â€¢ Start background task                 â”‚
â”‚ â€¢ Return immediately                    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Background Task: run_analysis_job()     â”‚  3. Background processing begins
â”‚                                         â”‚     Status: IN_PROGRESS
â”‚ Status â†’ IN_PROGRESS                    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: Web Scraping                    â”‚  4. Scrape from multiple sources
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚ Reddit Scraper (async)               â”‚     â€¢ 40% of quota
â”‚ â”‚  â”œâ”€ Search for product mentions      â”‚
â”‚ â”‚  â”œâ”€ Extract comments                 â”‚
â”‚ â”‚  â””â”€ Parse metadata                   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚ Review Site Scraper (async)          â”‚     â€¢ 30% of quota
â”‚ â”‚  â”œâ”€ Trustpilot/G2 style              â”‚
â”‚ â”‚  â”œâ”€ Extract reviews                  â”‚
â”‚ â”‚  â””â”€ Parse ratings                    â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚ Twitter Scraper (async)              â”‚     â€¢ 30% of quota
â”‚ â”‚  â”œâ”€ Search tweets                    â”‚
â”‚ â”‚  â”œâ”€ Extract text                     â”‚
â”‚ â”‚  â””â”€ Parse metadata                   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”‚ Result: 50 Comment objects
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: Sentiment Analysis              â”‚  5. Analyze each comment
â”‚                                         â”‚
â”‚ Input: 50 comment texts                 â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Sentiment Analyzer (DistilBERT)     â”‚ â”‚     â€¢ Batch processing
â”‚ â”‚                                     â”‚ â”‚     â€¢ GPU accelerated (if available)
â”‚ â”‚ Text â†’ Tokenizer â†’ Model â†’ Output   â”‚ â”‚     â€¢ ~512 chars per comment
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚ For each comment:                   â”‚ â”‚
â”‚ â”‚  â€¢ sentiment: "positive"|"negative" â”‚ â”‚
â”‚ â”‚  â€¢ score: -1.0 to 1.0               â”‚ â”‚
â”‚ â”‚  â€¢ confidence: 0.0 to 1.0           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚
â”‚ Result: 50 sentiment predictions
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: Database Storage                â”‚  6. Save all data
â”‚                                         â”‚
â”‚ For each comment:                       â”‚
â”‚  INSERT INTO customer_comments          â”‚
â”‚   (text, source, sentiment,             â”‚
â”‚    sentiment_score, confidence, ...)    â”‚
â”‚                                         â”‚
â”‚ Result: 50 rows in customer_comments    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: Aggregate Metrics               â”‚  7. Calculate statistics
â”‚                                         â”‚
â”‚ â€¢ Total comments: 50                    â”‚
â”‚ â€¢ Positive: 30 (60%)                    â”‚
â”‚ â€¢ Negative: 12 (24%)                    â”‚
â”‚ â€¢ Neutral: 8 (16%)                      â”‚
â”‚ â€¢ Avg sentiment: 0.35                   â”‚
â”‚ â€¢ Sentiment volatility: 0.42            â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: Churn Prediction                â”‚  8. Predict churn risk
â”‚                                         â”‚
â”‚ Input Features:                         â”‚
â”‚  â€¢ avg_sentiment: 0.35                  â”‚
â”‚  â€¢ negative_ratio: 0.24                 â”‚
â”‚  â€¢ total_comments: 50                   â”‚
â”‚  â€¢ sentiment_volatility: 0.42           â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Custom Churn Algorithm              â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚ sentiment_risk = (1 - avg) / 2      â”‚ â”‚
â”‚ â”‚ negative_boost = ratio * 0.3        â”‚ â”‚
â”‚ â”‚ volatility_boost = min(vol, 0.2)    â”‚ â”‚
â”‚ â”‚ volume_factor = min(count/50, 1.0)  â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚ churn_prob = weighted_combination   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ Result: churn_probability = 0.42        â”‚
â”‚         risk_level = "medium"           â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 6: Topic Extraction                â”‚  9. Extract key themes
â”‚                                         â”‚
â”‚ Analyze all comment texts for keywords: â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Topic: "price"                      â”‚ â”‚     â€¢ Mentions: 15
â”‚ â”‚  Keywords: price, expensive, cost   â”‚ â”‚     â€¢ Avg sentiment: -0.2
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Topic: "quality"                    â”‚ â”‚     â€¢ Mentions: 23
â”‚ â”‚  Keywords: quality, reliable        â”‚ â”‚     â€¢ Avg sentiment: 0.6
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ Topic: "support"                    â”‚ â”‚     â€¢ Mentions: 8
â”‚ â”‚  Keywords: support, service         â”‚ â”‚     â€¢ Avg sentiment: -0.4
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ INSERT INTO topics (...)                â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 7: Finalize Analysis               â”‚  10. Update analysis record
â”‚                                         â”‚
â”‚ UPDATE analyses SET                     â”‚
â”‚   status = 'COMPLETED',                 â”‚
â”‚   total_comments = 50,                  â”‚
â”‚   positive_count = 30,                  â”‚
â”‚   negative_count = 12,                  â”‚
â”‚   neutral_count = 8,                    â”‚
â”‚   avg_sentiment_score = 0.35,           â”‚
â”‚   churn_risk_score = 0.42,              â”‚
â”‚   completed_at = NOW()                  â”‚
â”‚ WHERE id = analysis_id                  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client polls: GET /status/{id}          â”‚  11. User retrieves results
â”‚                                         â”‚
â”‚ Returns: status = "COMPLETED"           â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client fetches:                         â”‚  12. Display dashboard
â”‚ GET /dashboard/iPhone 15                â”‚
â”‚                                         â”‚
â”‚ Returns:                                â”‚
â”‚  â€¢ Product info                         â”‚
â”‚  â€¢ Latest analysis                      â”‚
â”‚  â€¢ Recent comments (20)                 â”‚
â”‚  â€¢ Topics (sorted by mentions)          â”‚
â”‚  â€¢ Sentiment distribution               â”‚
â”‚  â€¢ Risk level                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technology Stack Details

### Frontend Layer
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ React 18.2+ with TypeScript             â”‚
â”‚                                         â”‚
â”‚ State Management:                       â”‚
â”‚  â€¢ React Hooks (useState, useEffect)    â”‚
â”‚  â€¢ Context API (optional for auth)      â”‚
â”‚                                         â”‚
â”‚ HTTP Client:                            â”‚
â”‚  â€¢ Axios with interceptors              â”‚
â”‚  â€¢ Async/await error handling           â”‚
â”‚                                         â”‚
â”‚ Styling:                                â”‚
â”‚  â€¢ Tailwind CSS 3.x                     â”‚
â”‚  â€¢ Responsive design utilities          â”‚
â”‚                                         â”‚
â”‚ Data Visualization:                     â”‚
â”‚  â€¢ Recharts (composable charts)         â”‚
â”‚  â€¢ Custom color schemes                 â”‚
â”‚                                         â”‚
â”‚ Routing:                                â”‚
â”‚  â€¢ React Router v6                      â”‚
â”‚  â€¢ Lazy loading components              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Backend Layer
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FastAPI 0.109+ (Python 3.9+)            â”‚
â”‚                                         â”‚
â”‚ API Features:                           â”‚
â”‚  â€¢ Automatic OpenAPI/Swagger docs       â”‚
â”‚  â€¢ Pydantic data validation             â”‚
â”‚  â€¢ Dependency injection                 â”‚
â”‚  â€¢ Background tasks (built-in)          â”‚
â”‚                                         â”‚
â”‚ Middleware:                             â”‚
â”‚  â€¢ CORS (configurable origins)          â”‚
â”‚  â€¢ Request logging                      â”‚
â”‚  â€¢ Error handling                       â”‚
â”‚                                         â”‚
â”‚ Database ORM:                           â”‚
â”‚  â€¢ SQLAlchemy 2.0                       â”‚
â”‚  â€¢ Async support (optional)             â”‚
â”‚  â€¢ Relationship loading strategies      â”‚
â”‚                                         â”‚
â”‚ Migrations:                             â”‚
â”‚  â€¢ Alembic                              â”‚
â”‚  â€¢ Auto-generate from models            â”‚
â”‚  â€¢ Version control for schema           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Machine Learning Layer
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sentiment Analysis                      â”‚
â”‚                                         â”‚
â”‚ Model: DistilBERT                       â”‚
â”‚  â€¢ Source: Hugging Face Transformers    â”‚
â”‚  â€¢ Size: ~250MB                         â”‚
â”‚  â€¢ Speed: ~100 texts/sec (CPU)          â”‚
â”‚  â€¢ Accuracy: 95%+ on reviews            â”‚
â”‚                                         â”‚
â”‚ Processing:                             â”‚
â”‚  â€¢ Tokenization: BERT tokenizer         â”‚
â”‚  â€¢ Max length: 512 tokens               â”‚
â”‚  â€¢ Batch size: 8-32 (adaptive)          â”‚
â”‚  â€¢ Output: logits â†’ softmax â†’ sentiment â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Churn Prediction                        â”‚
â”‚                                         â”‚
â”‚ Model: XGBoost Classifier               â”‚
â”‚  â€¢ Training data: Telco dataset         â”‚
â”‚  â€¢ Features: 19 (after encoding)        â”‚
â”‚  â€¢ Trees: 200                           â”‚
â”‚  â€¢ Max depth: 5                         â”‚
â”‚  â€¢ ROC-AUC: 0.84+                       â”‚
â”‚                                         â”‚
â”‚ Adaptation:                             â”‚
â”‚  â€¢ Maps sentiment â†’ churn features      â”‚
â”‚  â€¢ Custom weighted algorithm            â”‚
â”‚  â€¢ Considers multiple factors           â”‚
â”‚  â€¢ Volume-adjusted confidence           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Layer
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostgreSQL 14+                          â”‚
â”‚                                         â”‚
â”‚ Schema Design:                          â”‚
â”‚  â€¢ 4 main tables                        â”‚
â”‚  â€¢ Foreign key constraints              â”‚
â”‚  â€¢ Cascade deletes                      â”‚
â”‚  â€¢ Indexes on frequently queried cols   â”‚
â”‚                                         â”‚
â”‚ Data Types:                             â”‚
â”‚  â€¢ ENUM for status/sentiment            â”‚
â”‚  â€¢ TIMESTAMP WITH TIMEZONE              â”‚
â”‚  â€¢ TEXT for unlimited length            â”‚
â”‚  â€¢ FLOAT for scores                     â”‚
â”‚                                         â”‚
â”‚ Performance:                            â”‚
â”‚  â€¢ Indexes on: product name, dates      â”‚
â”‚  â€¢ Efficient JOIN queries               â”‚
â”‚  â€¢ Connection pooling                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Web Scraping Layer
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Multi-Source Scraper                    â”‚
â”‚                                         â”‚
â”‚ Libraries:                              â”‚
â”‚  â€¢ aiohttp (async HTTP)                 â”‚
â”‚  â€¢ BeautifulSoup4 (HTML parsing)        â”‚
â”‚  â€¢ Scrapy (optional, advanced)          â”‚
â”‚                                         â”‚
â”‚ Strategy:                               â”‚
â”‚  â€¢ Concurrent scraping (asyncio)        â”‚
â”‚  â€¢ Rate limiting (respectful)           â”‚
â”‚  â€¢ Error handling per source            â”‚
â”‚  â€¢ Timeout protection                   â”‚
â”‚                                         â”‚
â”‚ Sources (extensible):                   â”‚
â”‚  â€¢ Reddit (API or scraping)             â”‚
â”‚  â€¢ Twitter (API v2)                     â”‚
â”‚  â€¢ Review sites (Trustpilot, G2)        â”‚
â”‚  â€¢ Custom sources (easy to add)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Scalability Architecture

### Current (MVP)
```
Single Server:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FastAPI App                â”‚
â”‚   â€¢ API endpoints           â”‚
â”‚   â€¢ Background tasks        â”‚
â”‚   â€¢ ML models loaded        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL                 â”‚
â”‚   â€¢ All data                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Scaled (Production-Ready)
```
Load Balancer
     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â–¼             â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API     â”‚  â”‚ API     â”‚  â”‚ API     â”‚  â”‚ API     â”‚
â”‚ Server  â”‚  â”‚ Server  â”‚  â”‚ Server  â”‚  â”‚ Server  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚            â”‚            â”‚            â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â–¼            â–¼            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Redis   â”‚  â”‚ Celery  â”‚  â”‚ ML      â”‚
â”‚ Cache   â”‚  â”‚ Workers â”‚  â”‚ Service â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ PostgreSQL       â”‚
        â”‚ (Primary+Replica)â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Security Considerations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Current Implementation                  â”‚
â”‚                                         â”‚
â”‚ âœ… Environment variables for secrets    â”‚
â”‚ âœ… CORS configuration                   â”‚
â”‚ âœ… SQL injection protection (ORM)       â”‚
â”‚ âœ… Input validation (Pydantic)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Production Enhancements                 â”‚
â”‚                                         â”‚
â”‚ ğŸ”’ JWT authentication                   â”‚
â”‚ ğŸ”’ Rate limiting per user/IP            â”‚
â”‚ ğŸ”’ API key management                   â”‚
â”‚ ğŸ”’ HTTPS only                           â”‚
â”‚ ğŸ”’ Database encryption at rest          â”‚
â”‚ ğŸ”’ Secrets management (AWS Secrets)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment Options

### Option 1: Traditional VPS
```
DigitalOcean/Linode Droplet
â”œâ”€â”€ Nginx (reverse proxy)
â”œâ”€â”€ FastAPI (via uvicorn/gunicorn)
â”œâ”€â”€ PostgreSQL (same or separate server)
â””â”€â”€ Frontend (built static files)
```

### Option 2: Container-based
```
Docker Compose:
â”œâ”€â”€ backend container (FastAPI)
â”œâ”€â”€ frontend container (Nginx + React build)
â”œâ”€â”€ postgres container
â””â”€â”€ redis container (optional)
```

### Option 3: Cloud Platform
```
AWS:
â”œâ”€â”€ Frontend: S3 + CloudFront
â”œâ”€â”€ Backend: ECS/Fargate or Lambda
â”œâ”€â”€ Database: RDS PostgreSQL
â””â”€â”€ ML Models: SageMaker or ECS

Heroku (easiest):
â”œâ”€â”€ Web dyno (FastAPI)
â”œâ”€â”€ Heroku Postgres addon
â””â”€â”€ Frontend on Vercel/Netlify
```

---

This architecture provides a solid foundation that can scale from MVP to production! ğŸš€
